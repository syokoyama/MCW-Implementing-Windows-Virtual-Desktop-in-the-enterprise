![マイクロソフト クラウド ワークショップ](https://github.com/Microsoft/MCW-Template-Cloud-Workshop/raw/master/Media/ms-cloud-workshop.png "マイクロソフト クラウド ワークショップ")

<div class="MCWHeader1">
エンタープライズでの Windows Virtual Desktop の実装
</div>
<div class="MCWHeader2">
ホワイトボード設計セッション受講者ガイド
</div>
<div class="MCWHeader3">
2020 年 9 月
</div>
このドキュメントに記載されている情報 (URL 等のインターネット Web サイトに関する情報を含む) は、将来予告なしに変更されることがあります。特に断りがない限り、ここで使用している会社、組織、製品、ドメイン名、電子メール アドレス、ロゴ、人物、場所、イベントの例は、架空のものであり、実在する会社、組織、製品、ドメイン名、電子メール アドレス、ロゴ、人物、場所、イベントなどとは一切関係ありません。お客様ご自身の責任において、適用されるすべての著作権関連法規に従ったご使用を願います。このドキュメントのいかなる部分も、米国 Microsoft Corporation の書面による許諾を受けることなく、その目的を問わず、どのような形態であっても、複製または譲渡することは禁じられています。ここでいう形態とは、複写や記録など、電子的な、または物理的なすべての手段を含みます。ただしこれは、著作権法上のお客様の権利を制限するものではありません。

マイクロソフトは、このドキュメントに記載されている内容に関し、特許、特許申請、商標、著作権、またはその他の無体財産権を有する場合があります。別途マイクロソフトのライセンス契約上に明示の規定のない限り、このドキュメントはこれらの特許、商標、著作権、またはその他の無体財産権に関する権利をお客様に許諾するものではありません。

製造元や製品の名前、URL は情報の提供のみを目的としており、マイクロソフトは、これらの製造元、またはマイクロソフトの技術での製品の使用について、明示的、黙示的、または法的にいかなる表示または保証も行いません。製造元または製品の使用は、マイクロソフトによるその製造元または製品の推奨を意味するものではありません。サード パーティのサイトへのリンクが提供されている場合があります。このようなサイトはマイクロソフトの管理下にはなく、マイクロソフトは、リンクされたサイトの内容またはリンクされたサイトに含まれるリンク、あるいはこのようなサイトの変更または更新について責任を負いません。マイクロソフトは、リンクされたサイトから受信された Web キャストまたは他のいかなる形態の転送にも責任を負いません。マイクロソフトは、これらのリンクを便宜のみを目的として提供しており、いかなるリンクの使用も、マイクロソフトによるサイトまたはそこに含まれる製品の推奨を意味するものではありません。

© 2020 Microsoft Corporation.All rights reserved.

Microsoft および  https://www.microsoft.com/en-us/legal/intellectualproperty/Trademarks/Usage/General.aspx に記載されている商標は、Microsoft グループの商標です。その他すべての商標は、該当する各社が所有しています。

**目次**

<!-- TOC -->

- [トレーナーの情報](#トレーナーの情報)
    - [トレーナーの役割](#トレーナーの役割)
    - [ホワイトボード設計セッションの手順](#ホワイトボード設計セッションの手順)
    - [ホワイトボード設計セッション前: 準備方法](#ホワイトボード設計セッション前-準備方法)
    - [ホワイトボード設計セッション中: 効果的なホワイトボード設計セッションのヒント](#ホワイトボード設計セッション中-効果的なホワイトボード設計セッションのヒント)
- [エンタープライズでの Windows Virtual Desktop の実装のためのホワイトボード設計セッション受講者ガイド](#エンタープライズでの-windows-virtual-desktop-の実装のためのホワイトボード設計セッション受講者ガイド)
    - [要約と学習目的](#要約と学習目的)
    - [ステップ 1: 顧客のケース スタディの確認](#ステップ-1-顧客のケース-スタディの確認)
        - [顧客の状況](#顧客の状況)
        - [顧客のニーズ](#顧客のニーズ)
        - [顧客の反論](#顧客の反論)
        - [一般的なシナリオのインフォグラフィック](#一般的なシナリオのインフォグラフィック)
        - [セキュリティ シナリオ](#セキュリティ-シナリオ)
        - [ネットワーク シナリオ](#ネットワーク-シナリオ)
        - [Windows Virtual Desktop の標準アーキテクチャ](#windows-virtual-desktop-の標準アーキテクチャ)
    - [ステップ 2: 概念実証ソリューションの設計](#ステップ-2-概念実証ソリューションの設計)
    - [ステップ 3: ソリューションをプレゼンテーションする](#ステップ-3-ソリューションをプレゼンテーションする)
    - [まとめ](#まとめ)
    - [追加リファレンス](#追加リファレンス)
- [エンタープライズでの Windows Virtual Desktop の実装のためのホワイトボード設計セッション トレーナー ガイド](#エンタープライズでの-windows-virtual-desktop-の実装のためのホワイトボード設計セッション-トレーナー-ガイド)
    - [ステップ 1: 顧客のケース スタディの確認](#ステップ-1-顧客のケース-スタディの確認-1)
    - [ステップ 2: 概念実証ソリューションの設計](#ステップ-2-概念実証ソリューションの設計-1)
    - [ステップ 3: ソリューションをプレゼンテーションする](#ステップ-3-ソリューションをプレゼンテーションする-1)
    - [まとめ](#まとめ-1)
    - [推奨される対象者](#推奨される対象者)
    - [推奨ソリューション](#推奨ソリューション)
    - [反論への推奨される対応のチェックリスト](#反論への推奨される対応のチェックリスト)
    - [顧客の声 (最後に出席者に対して読み上げる)](#顧客の声-最後に出席者に対して読み上げる)

<!-- /TOC -->
# トレーナーの情報

トレーナーとしてホワイトボード設計セッションをサポートするためにお時間を割いていただき誠にありがとうございます。

## トレーナーの役割

優れたトレーナーとは

- 安全に学習できる環境を構築します。

- 参加者の思考を刺激します。

- 参加者を学習プロセスに関与させます。

- 学習プロセスを管理します (時間どおりに、トピックに従って、参加者がメリットを得られるように調整します)。

- 個々の参加者の責任を徹底します。

- 参加者のためにすべてをまとめます。

- 学習プロセスへの洞察と経験を提供します。

- ホワイトボード設計セッションの議論を効果的に主導します。

- 参加者の成果物の品質と妥当性を監視します。

- フィードバック プロセスを効果的に主導します。

## ホワイトボード設計セッションの手順

各ホワイトボード設計セッションは、次の手順で行います。

**ステップ 1: 顧客のケース スタディの確認 (15 分)**

**成果**

顧客のニーズを分析する

- 顧客の背景、状況、ニーズ、および技術的な要件

- 顧客の現在のインフラストラクチャとアーキテクチャ

- 潜在的な問題、反論、および阻害要因

**ステップ 2: 概念実証ソリューションの設計 (60 分)**

**成果**

ソリューションを設計し、そのソリューションを 15 分のチョークトーク形式で顧客の対象者にプレゼンテーションする準備をする

- 顧客の対象者を決定する

- 顧客のビジネス ニーズを判断してソリューションに取り組む

- ソリューションを設計して図で表す

- ソリューションのプレゼンテーションを準備する

**ステップ 3: ソリューションのプレゼンテーション (30 分)**

**成果**

ソリューションを顧客にプレゼンテーションする

- ソリューションをプレゼンテーションする

- 顧客の反論に回答する

- フィードバックを受ける

**まとめ (15 分)**

- 推奨ソリューションを確認する

## ホワイトボード設計セッション前: 準備方法

最初のホワイトボード設計セッションを実施する前に、以下を行います。

- 受講者ガイド (ケース スタディを含む) およびトレーナー ガイドを読む

- すべてのキー ポイントとアクティビティを十分に理解する

- 強調したいポイント、どの質問を活発化させたいか、および進め方を計画し、質問に回答する準備をする

- ホワイトボード設計セッションの前に、ケース スタディについて議論してさらにアイデアを集める

- 後で参照するためにメモを取る

## ホワイトボード設計セッション中: 効果的なホワイトボード設計セッションのヒント

**トレーナー ガイドを参照して**、セッションを円滑に進め、時間を守る。

ホワイトボード設計セッションの**詳細をすべて覚えようとしない**。

参加者がアクティビティを実施しているときに、**次に何を行うかを考えて、覚えていることを確認する**。

- 必要に応じて、**アクティビティとホワイトボード設計セッションのペースを調整して**、プレゼンテーション、フィードバック、および共有の時間を設ける。

- 自身の経験から、**例、ポイント、および事例を追加する**。共有できる事例の中から、ポイントを明確かつ効果的に伝えるのに役立つものがないか考えます。

- ホワイトボード設計セッションのスコープ外で発生した問題や疑問、または後で回答できる問題や疑問を記録する **"パーキング ロット" を設けることを検討する**。これらの問題をどのように解決するかを判断し、脱線することなく問題を確認できるようにします。

**楽しむ**。楽しんで共有するよう参加者に促します。

**参加者を関与させる**。話をして自身の知識を共有しますが、自分が話している間も常に参加者を関与させます。

**質問をする**。グループを十分に学習プロセスに関与させるために、質問の内容を共有します。

可能な限り、**最初に質問から入る**。トピックを始める前に、そのトピックに関する対象者の意見と経験について学びます。最初に質問から入ることにより、対象者の知識と経験のレベルを評価し、対象者がプレゼンテーションの内容に対してオープンな姿勢を保つことができます。

**反応を待つ**。"(空欄に記入) についてどのような経験がありますか" のような質問をして、反応を待ちます。多少の沈黙は気にしないでください。こちらから沈黙を破ると、参加者を真剣には関与させようとしていないのではないかという印象を与え、参加者は受け身になってしまいます。参加者に考えるチャンスを与え、誰も答えない場合は、辛抱強くもう一度質問します。通常は反応があります。

# エンタープライズでの Windows Virtual Desktop の実装のためのホワイトボード設計セッション受講者ガイド

## 要約と学習目的

ホワイトボード設計セッションでは、グループで作業して、Microsoft 365 および Azure テクノロジを使用して Windows Virtual Desktop ソリューションを設計します。ソリューションでは、Windows 10 Enterprise のマルチユーザー ライセンスに必要な Microsoft 365 サブスクリプションと、Azure Active Directory および医療提供者のためのセキュリティ ニーズについても考慮する必要があります。Azure を現在の VMware および Citrix のオンプレミス インフラストラクチャに接続する方法と、アプリケーションにアクセスするためにこのインフラストラクチャを Azure に接続する方法も決定することが必要です。最後に、Azure 仮想マシンを活用して、パフォーマンス低下を招くことなく 24 時間 365 日の業務に対応できる可用性とスケーラビリティを備えた Windows Virtual Desktop ソリューションを設計する必要があります。

このホワイトボード設計セッションを完了すると、Microsoft 365 および Azure テクノロジを共に活用して、安全で堅牢な Windows Virtual Desktop インフラストラクチャを構築するためのソリューションをより効果的に設計できるようになります。

## ステップ 1: 顧客のケース スタディの確認

**成果**

顧客のニーズを分析する

所要時間: 15 分

指示: セッションの参加者全員と共に、ファシリテーター/SME は、顧客のケース スタディの概要を技術的なヒントと併せてプレゼンテーションします。

1. テーブルの参加者およびトレーナーと打ち合わせを行います。

2. 受講者ガイドのステップ 1 ～ 3 の指示をすべて読みます。

3. テーブル チームとして、次の顧客のケース スタディを確認します。

### 顧客の状況

カリフォルニア州ロサンゼルスに本拠を置く Contoso Healthcare は、北米全土に連携病院とクリニックのネットワークを有する国立医療機関です。このネットワークは買収を通じて成長し続けています。同機関のビジネスの性質として、従業員の PII (個人の特定が可能な情報) の高度なセキュリティを必要としています。

Contoso の環境内には現在約 250 台のワークステーションがあり、開発者、および財務部門や知財部門の非臨床ユーザーのためのビジネス アプリケーションがインストールされています。Contoso は現在カリフォルニア州およびバージニア州北部で既存のデータ センターをサポートしており、サーバーの制御プレーンに VMware を使用し、Citrix 仮想デスクトップ インフラストラクチャを部分的にデプロイしています。これらの拠点はプライベート WAN 接続とブロードバンドを経由したバックアップ VPN によって接続されています。

Contoso Healthcare の CTO である Ken Greenwald 氏は、パブリック クラウドの価値を評価しており、Microsoft Azure を、組織にとってのリソースの可用性を維持すると共に、スケーラビリティを向上させるための優れたオプションと見なしています。彼のチームは、組織全体に広がる 250 台のワークステーションを管理することに苦戦しており、ユーザーがアプリケーションに安全にアクセスできるようにする、標準化されたデスクトップ イメージを容易に管理および維持できるようにするオプションを必要としています。これらのデスクトップ イメージはローカル マシン上で維持しないようにすることが理想的です。Greenwald 氏はこのように語ります。「Contoso Healthcare は北米中のクリニックおよび病院の買収を通じて成長し続けているため、それらの各拠点におけるハードウェアを標準化する能力の点で問題が生じています。経営幹部は新しい機器に対する設備投資を増やすことに乗り気ではないため、当社は IT 組織として現在の VMware と Citrix の仮想デスクトップ インフラストラクチャを最大限に活用して、アプリケーションをユーザーに配信することを余儀なくされています。当社のデータ センター内に既に導入しているものを利用して、Microsoft Azure テクノロジを統合する機能を必要としており、それによって組織全体で標準化を実現し、新しい病院の買収を迅速に統合する当社の能力を高めたいと考えています」

Contoso Healthcare の CISO である Laura Knight 氏には、さらにいくつかの対処すべき目標があります。彼女は、病院の買収によって獲得した複数のデバイスによって、組織全体でデータ漏えいの脅威が生じることを懸念しています。これらのデバイスのモビリティが引き続き高まっているため、個人の医療データ (PHI) と個人を特定できる情報 (PII) が承認されていない人物に開示される懸念が生じています。また、彼女は ISO 27001、HIPAA、およびカリフォルニア州の個人情報保護法 (GDPR に類似) のコントロールなどのプライバシー標準を監査する責任も担っています。Knight 氏はこう語ります。「Contoso Healthcare の成長によって、セキュリティとコンプライアンスを担う私のチームに対する負担が高まっています。さまざまなオペレーティング システム上のシステムがオンラインになるため、それらを監視することはますます難しくなっています。これらのオペレーティング システムの中には、監査とアプリケーション アクセスのためのモバイル デバイス管理ソフトウェアをサポートしないものもあります。さらに、セキュリティ ポリシーと機密情報へのアクセスに一元化された標準を強制することは困難です。私のチームは、当社のデータとリソースのセキュリティを維持し、脅威またはデバイスへの不正アクセスによるデータ損失の可能性を軽減する能力を備えている必要があります」

Contoso Healthcare は、現在のインフラストラクチャおよびアプリケーションの初期のクラウド評価を完了し、以下の分野において Microsoft 365 と Azure テクノロジがサポートできると感じています。

**セキュリティ**: ヘルスケア ビジネスでは、ファイルおよび財務記録にアクセスするためにモバイル デバイスにますます依存するようになっており、それは盗難とデータ漏えいに対する懸念を生み出しています。Contoso では、仮想デスクトップ インフラストラクチャを使用することで、ローカル デバイスに PHI または PII が存在する可能性を排除したいと考えています。また、承認済みのアプリケーションを管理し、未承認のクラウド アプリケーションをブロックできるようにしたいとも考えています。セキュリティ コントロールは、ISO 27001、カリフォルニア州の個人情報保護法、および HIPAA 標準に合わせて監査、ログ記録、およびレビューされる必要があります。

**可用性とスケーラビリティ**: 医療提供者として、Contoso はアプリケーションを 24 時間 365 日アクセス可能にする必要があるため、高可用性とスケーラビリティを念頭に置いてあらゆるインフラストラクチャを設計する必要があります。Contoso Healthcare は買収を通じて成長しているため、新しいユーザーの追加に対応してリソースを迅速にスケールアウトする能力が必要です。

**デプロイ高速化**: Contoso には、現在のデバイスをアップグレードするために必要な追加の設備投資の予算がありません。そのため、標準のデスクトップ イメージをユーザーに提供するために、現在利用可能なデバイスを活用する必要があります。Contoso は、現在の VMware および Citrix インフラストラクチャを、ユーザー デスクトップにアプリケーションを配信する制御プレーンとして利用します。

### 顧客のニーズ

1. Contoso Healthcare は、モバイル デバイスの場所を管理し、Contoso Health ネットワーク上にない時は患者の医療データへのアクセスを防止する機能を必要としています。

2. Contoso Healthcare では、PHI および PII データが、ローカル デバイスではなく中央の暗号化されたストレージ アカウントに保存されることが必要です。

3. Contoso Healthcare はアクティビティとアクセスをログ記録し、ISO 27001、カリフォルニア州個人保護法、および HIPAA コントロールに対するコンプライアンスを監査できなければなりません。

4. Contoso Healthcare には、24 時間 365 日のアプリケーションに対するアクセスと、需要の増加に伴ってリソースをスケーリングする能力が必要です。

5. Contoso Healthcare は、アプリケーションにアクセスする際の低待機時間を実現する、ネットワーク接続の冗長性を必要としています。

6. Contoso Healthcare では、ローカル デバイスを更新および管理することなく、標準化されたデスクトップ イメージを作成し、すべてのユーザーに配信する能力が必要です。

7. Contoso Healthcare は、現在のカリフォルニア州およびバージニア州北部のデータ センターにおいて現行のアプリケーション インフラストラクチャを活用する必要があります。

### 顧客の反論

1. Contoso Healthcare の CTO は、標準化されたデスクトップ イメージをサポートするために新しいワークステーションとモバイル デバイスに投資することを望んでいません。OS なし、Mac、Android、シン クライアントのどれについてもです。これらのデバイスで新しいイメージをサポートできるでしょうか。

2. Contoso Healthcare の CISO を、データが漏えいすることはないと説得する必要があります。マイクロソフトは Contoso Healthcare のデータ保護のニーズをどのようにサポートできるでしょうか。

3. Contoso Healthcare ではデスクトップ イメージ上のすべてのアクティビティをログ記録して監査できる必要があります。クラウドおよびオンプレミス環境上でこれにどのように対処できるでしょうか。

4. 要件を満たすためには、クラウドと既存のデータ センター間の接続はセキュアで信頼性が高いものである必要があります。どのようにこの点を解決し、監視できるでしょうか。

5. Contoso Healthcare は、現在のデータ センターにかなりの設備投資を行ってきているため、それらを使用停止にすることは望んでいません。可能な限り既存のインフラストラクチャを活用したいと考えています。

### 一般的なシナリオのインフォグラフィック

### セキュリティ シナリオ

セキュリティ シナリオは、ソリューションを設計するために必要となる、考えられるセキュリティ、監視、およびコンプライアンス監査のオプションに適用されます。

![Azure Monitor および Network Watcher をどのように Azure と Azure 以外の両方の VM およびネットワーク接続に使用できるかを示す一般的なシナリオです。右の図において、オンプレミス サーバーはエージェントによって Azure Monitor に接続され、Network Watcher はオンプレミス データセンターと Azure 間の接続を監視します。Azure では、Azure Monitor は Windows Virtual Desktop ホスト プール インスタンスに接続され、Network Watcher はこれらのホストと VNET への接続を監視します。メトリックとアクティビティ ログの情報はその後 Azure Monitor、Log Analytics、Azure Policy、および Azure Security Center に入力されて、これらのリソースのパフォーマンス、アクティビティ、およびコンプライアンスが管理されます。](images/security.png "セキュリティ シナリオ")

### ネットワーク シナリオ

Microsoft Azure からオンプレミス ネットワークへの接続のための考えられるオプションを示すネットワーク シナリオの図です。

![オンプレミス ファイアウォールと Azure ファイアウォール間の VPN 接続を通して Azure に接続するためのオンプレミス データセンター向けのサイト間接続の構成を表す図です。](images/network.png "ネットワーク シナリオ")

### Windows Virtual Desktop の標準アーキテクチャ

この図は、Azure および Microsoft 365 を使用する単純な Windows Virtual Desktop アーキテクチャの概要を示しています。これには、Windows Virtual Desktop ユーザー接続と Windows Virtual Desktop ホスト プールが含まれます。

![WVD ホストプールを介して Windows 10 および Microsoft 365 アプリケーションのために Windows デスクトップ仮想イメージに接続する必要のある複数のデバイスがあることを示す図です。](images/wvdarchitecture.png "Windows Virtual Desktop の標準アーキテクチャ")

## ステップ 2: 概念実証ソリューションの設計

**成果**

ソリューションを設計し、そのソリューションを 15 分のチョークトーク形式で顧客の対象者にプレゼンテーションする準備をする

所要時間: 60 分

**ビジネス ニーズ**

指示: テーブルのすべての参加者と共に以下の質問に回答し、回答をフリップ チャートに一覧にします。

1. このソリューションを誰にプレゼンテーションするべきか。顧客の対象者は誰か。意思決定者は誰か。

2. ソリューションで解決する必要がある顧客のビジネス ニーズは何か。

**設計**

指示: テーブルのすべての参加者と共に、フリップ チャートの次の質問に回答します。

アーキテクチャの概要

組織のニーズと要件に対応する Windows Virtual Desktop インフラストラクチャを設計します。実装の詳細を示してください。図を使用して設計を文書化し、質問に答えるようにしてください。以下の分野における要件に対応します。

Microsoft 365

1. Windows 10 マルチユーザー ライセンスには、どの Microsoft 365 サブスクリプションが必要ですか。

2. Contoso のモバイル デバイス要件にはどのサブスクリプションが必要ですか。

3. PHI および PII アクセスを分類および保護するには、どのサブスクリプションが必要ですか。

4. ローカル ネットワークのみでデバイスのアクセスを適用するには、どのサブスクリプションが必要ですか。

5. Microsoft 365 サブスクリプションを選択したのはなぜですか。

セキュリティ

1. ISO 27001 および HIPAA のためのコントロールを監査、ログ記録、および監視するために何が必要ですか。

2. Azure およびオンプレミスのデータ センターにおいてこれらのコントロールをどのように監視する予定ですか。

3. 転送中および保存時のデータのデータ漏えいをどのように防止しますか。

4. クラウドおよび現在の Active Directory インフラストラクチャの ID およびアクセス管理をどのように維持しますか。 またそれらをどのように同期しますか。

5. セキュアで一元化されたファイル ストレージを求める組織のニーズにどのように対処しますか。

6. 特定のセキュリティ サービスが選択された理由を説明してください。

ネットワーキング

1. どのリージョンにリソースを展開しますか。またそれはなぜですか。

2. 設計をサポートするためにどのようにリソース グループを設計しますか。

3. 仮想ネットワーク (VNET) は IP アドレスとサブネットに対してどのように構成されますか。

4. 待機時間を最小限に抑えてセキュリティを最大限にするために、Contoso Healthcare のデータ センターにどのように接続しますか。

5. ユーザーが安全に接続するために、どの受信ポート (存在する場合) をセッション ホストに対してオープンにする必要がありますか。

6. ネットワーク上の脅威を特定および監視するために何を使用しますか。

7. ネットワーク全体でネットワーク スループットと待機時間をどのように監視しますか。

Windows Virtual Desktop イメージ

1. 標準化されたデスクトップ イメージはどのように作成されますか。

2. アプリケーションはどのようにデスクトップ イメージに配信されますか。

3. ユーザーが Windows Virtual Desktop イメージにアクセスできるようにするためのどのような接続オプションがありますか。

4. ユーザーが Windows Virtual Desktop イメージにアクセスできるようにするための最小システム要件はどのようなものですか。

Windows Virtual Desktop ホスト プール

1. Virtual Desktop イメージにアクセスするためにいくつの同時セッションが必要になりますか。

2. 同時セッションの数をサポートするために何台の仮想マシンが必要になりますか。

**準備**

指示: テーブルのすべての参加者と共に、以下を行います。

1. 提案したソリューションでは対応していない顧客ニーズを特定します。

2. ソリューションの利点を特定します。

3. 顧客の反論にどのように回答するかを決定します。

顧客に対する 15 分のチョークトーク形式のプレゼンテーションを準備します。

## ステップ 3: ソリューションをプレゼンテーションする

**成果**

顧客の対象者にソリューションを 15 分のチョークトーク形式でプレゼンテーションする

所要時間: 30 分

**プレゼンテーション**

指示:

1. 別のテーブルとペアを組みます。

2. 一方のテーブルはマイクロソフト チーム、他方のテーブルは顧客とします。

3. マイクロソフト チームは提案ソリューションを顧客にプレゼンテーションします。

4. 顧客は反論リストから反論を 1 つ行います。

5. マイクロソフト チームは反論に回答します。

6. 顧客チームはマイクロソフト チームにフィードバックを提供します。

7. テーブル間で役割を切り替えて、ステップ 2 ～ 6 を繰り返します。

## まとめ

所要時間: 15 分

指示: より大きなグループでテーブルに再度集まり、ファシリテーター/SME がこのケース スタディの推奨ソリューションを共有するのを聞きます。

## 追加リファレンス

|    |            |
|----------|:----------:
| **説明**| **リンク**
| Windows Virtual Desktop の概要| <https://docs.microsoft.com/ja-jp/azure/virtual-desktop/overview>
| Windows Virtual Desktop 環境のセットアップ| <https://docs.microsoft.com/ja-jp/azure/virtual-desktop/environment-setup>
| 仮想デスクトップ ホスト プールの作成| <https://docs.microsoft.com/ja-jp/azure/virtual-desktop/create-host-pools-azure-marketplace>
| Windows Virtual Desktop のライセンス要件と価格設定| <https://azure.microsoft.com/ja-jp/pricing/details/virtual-desktop/>
| マスター VHD イメージを準備してカスタマイズする| <https://docs.microsoft.com/ja-jp/azure/virtual-desktop/set-up-customize-master-image>
| Azure Policy の概要| <https://docs.microsoft.com/ja-jp/azure/governance/policy/overview>
| Azure Security Center| <https://docs.microsoft.com/ja-jp/azure/security-center/>
| Azure Active Directory| <https://docs.microsoft.com/ja-jp/azure/active-directory/>
| Windows Virtual Desktop の FSLogix ファイル ストレージ コンテナー| <https://docs.microsoft.com/ja-jp/azure/virtual-desktop/fslogix-containers-azure-files>
| Web クライアントを使用して WVD へ接続する| <https://docs.microsoft.com/ja-jp/azure/virtual-desktop/connect-web>
| WVD セキュリティのベスト プラクティス| <https://docs.microsoft.com/ja-jp/azure/virtual-desktop/security-guide>
| Microsoft 365 Enterprise プラン| <https://www.microsoft.com/ja-jp/microsoft-365/compare-microsoft-365-enterprise-plans>
| Microsoft 365 Enterprise Mobility + Security プラン| <https://www.microsoft.com/ja-jp/microsoft-365/enterprise-mobility-security/compare-plans-and-pricing?rtc=1>
| Windows Virtual Desktop のパートナー| <https://docs.microsoft.com/ja-jp/azure/virtual-desktop/partners>

# エンタープライズでの Windows Virtual Desktop の実装のためのホワイトボード設計セッション トレーナー ガイド

## ステップ 1: 顧客のケース スタディの確認

- テーブルの参加者に会い、自身をトレーナーとして自己紹介する。

- "顧客のケース スタディについてどのような質問があるか" と尋ねる。

- ホワイトボード設計セッションのステップと所要時間を簡単に確認する。

- 準備が整ったら、テーブルの参加者に開始させる。

## ステップ 2: 概念実証ソリューションの設計

- テーブルを回り、各ステップが時間どおりに進んでいることを確認する。

- ビジネス ニーズと設計への回答について何らかのフィードバックを提供する。
  
  - 最初に、参加者が自分自身で回答を見つけやすくなるような質問をしてみる。

- 顧客の反論への回答にフィードバックを提供する。
  
  - 最初に、参加者が自分自身で回答を見つけやすくなるような質問をしてみる。

## ステップ 3: ソリューションをプレゼンテーションする

- ステップ 3 の開始前に、どのテーブルが自分のテーブルとペアを組むかを決定する。

- 1 回目では、一方のテーブルをプレゼンテーション チームとして割り当て、他方を顧客として割り当てる。

- プレゼンテーション チームがそのソリューションを顧客チームにプレゼンテーションする。
  
  - プレゼンテーション チームが回答すべき反論を、顧客チームから 1 つ提供する。
  
  - プレゼンテーション、反論、およびフィードバックは 15 分以内に収める必要がある。
  
  - 必要に応じて、トレーナーもフィードバックを提供できる。

## まとめ

- より大きなセッション グループにテーブルの参加者を再度集め、ファシリテーター/SME が次の推奨ソリューションを共有するのを聞きます。

## 推奨される対象者

- Ken Greenwald 氏、Contoso Healthcare CTO

- Laura Knight 氏、Contoso Healthcare CISO

- デスクトップ管理者

- サービス デリバリー マネージャー

- インフラストラクチャ、仮想化、ストレージ、およびネットワーキングの各チーム

## 推奨ソリューション

アーキテクチャの概要

組織のニーズと要件に対応する Windows Virtual Desktop インフラストラクチャを設計します。実装の詳細を示してください。図を使用して設計を文書化し、質問に答えるようにしてください。以下の分野における要件に対応します。

Microsoft 365

1. Windows 10 マルチユーザー ライセンスには、どの Microsoft 365 サブスクリプションが必要ですか。
   
   Windows Virtual Desktop をサポートする Microsoft 365 ライセンスには、M365 E3、E5、A3、A5、F3、および Business Premium が含まれます。

2. Contoso のモバイル デバイス要件にはどのサブスクリプションが必要ですか。
   
   Intune MDM には、Microsoft Enterprise Mobility + Security E3 または E5 が必要です。

3. PHI および PII アクセスを分類および保護するには、どのサブスクリプションが必要ですか。
   
   データ保護、情報保護と分類、および高度な脅威防止機能の完全なスイートには、Microsoft 365 E5 ライセンスが必要です。

4. ローカル ネットワークのみでデバイスのアクセスを適用するには、どのサブスクリプションが必要ですか。
   
   条件付きアクセス ポリシーは EMS E3 および E5 で利用できます。ただし、リスクベースの条件付きアクセス ポリシーは EMS E5 でのみ利用可能であるため、この組織にはこちらが最適であると言えます。

5. Microsoft 365 サブスクリプションを選択したのはなぜですか。
   
   お客様によって説明されたすべての要件をサポートするには、Microsoft 365 Enterprise E5 の Enterprise Mobility + Security E5 が必要になります。Windows Virtual Desktop をサポートする Microsoft 365 ライセンスには、M365 E3、E5、A3、A5、F3、および Business Premium が含まれます。ただし、モバイル デバイス管理、データ分類と情報保護、および条件付きアクセス ポリシーの追加の要件には、E5 および EMS E5 ライセンスが必要です。Business Premium ライセンスも、最大 300 人のユーザーまでであればサポートされます。

セキュリティ

1. ISO 27001 および HIPAA のためのコントロールを監査、ログ記録、および監視するために何が必要ですか。
   
   ISO 27001 および HIPAA のための Azure Policy イニシアチブが、Windows Virtual Desktop インフラストラクチャを管理するために作成されたリソース グループに対して有効にされている必要があります。さらに、Azure Security Center を Standard レベルのサブスクリプションにアップグレードして、ISO 27001 および HIPAA 標準へのコントロールのコンプライアンスを適切に監視し、アラートを設定することが必要です。
   
   カリフォルニア州の個人情報保護法へのコンプライアンスに対応するために、GDPR のための Azure Policy イニシアチブが割り当てられ、CPPA に準拠するために必要に応じてカスタム ポリシーが追加されます。

2. Azure およびオンプレミスのデータ センターにおいてこれらのコントロールをどのように監視する予定ですか。
   
   Azure Policy イニシアチブを管理するために、すべての Azure およびオンプレミスの仮想マシンに Azure Monitor エージェントがインストールされます。これらのエージェントは、Azure Security Center 内で監視できるアクティビティ ログを提供します。
   
   脅威監視のために ATP を使用する必要があります。
   
   インシデント対応と調査のために Azure Sentinel を使用する必要があります。

3. 転送中および保存時のデータのデータ漏えいをどのように防止しますか。
   
   データ転送のためのすべての接続は、暗号化された SSL 接続を経由して行われます。保存時のデータは、保存中暗号化されます。
   
   承認済みアプリケーションを管理するために Cloud App Security が使用されます。これは、未承認のクラウド ストレージ サービスをブロックして、データがコピーされることを防ぐために使用されます。

4. クラウドおよび現在の Active Directory インフラストラクチャの ID およびアクセス管理をどのように維持しますか。またそれらをどのように同期しますか。
   
   クラウド ID は、Azure Active Directory 内で作成されます。これは、Microsoft 365、Windows Virtual Desktop、および Azure サービスで使用される主要な ID ソースとなります。Active Directory ドメイン サービスのユーザー ID は、Azure Active Directory にインポートされて、ユーザーのログイン資格情報が維持されます。Contoso Healthcare のデータ センターには Azure AD Connect がインストールされて、シングル サインオンを提供するためにユーザーの資格情報が同期されます。パスワード ハッシュ同期が使用され、ユーザーがデータ センターの Active Directory サービスまたはクラウドの Azure Active Directory サービスを通して認証できるようになります。

5. セキュアで一元化されたファイル ストレージを求める組織のニーズにどのように対処しますか。
   
   Azure Files は、Windows Virtual Desktop でストレージを使用する際に推奨される方法です。さらに、Azure Files と組み合わせて FSLogix を使用して、ユーザーの仮想デスクトップ プロファイルを管理することができます。Azure Files は、仮想マシン プールと同じリージョンで展開する必要があります。

6. 特定のセキュリティ サービスが選択された理由を説明してください。
   
   Azure Monitor、Log Analytics、ATP、Cloud App Security、Azure Security Center、および Azure Sentinel は、環境内の潜在的な脆弱性、脅威、または異常を監視、管理、および調査して、Azure、Microsoft 365、およびオンプレミス リソース間でユーザーとデータを保護します。

ネットワーキング

1. どのリージョンにリソースを展開しますか。またそれはなぜですか。
   
   カリフォルニア州およびバージニア州北部の待機時間を短縮するために、米国西部と米国東部のリージョンを Azure でピアリングする必要があります。
   
   Window Virtual Desktop インフラストラクチャ リソースに対して単一のリソース グループを展開します。

2. 設計をサポートするためにどのようにリソース グループを設計しますか。
   
   Windows Virtual Desktop インフラストラクチャ全体を単一のリソース グループ内で作成する必要があります。これによって、リソースの管理が容易になり、Azure サブスクリプション内で容易に消費量を分析およびレビューできるようになります。

3. 仮想ネットワーク (VNET) は IP アドレスとサブネットに対してどのように構成されますか。
   
   リソース グループは、少なくとも 3 つの個別の VNET およびサブネットで構成される必要があります。最初のものは Virtual Desktop ホストプールの VNET で、2 番目のものはオンプレミス ネットワークに接続するために使用される VNET で、3 番目はサポートのためのセキュアな仮想マシンのアクセスに利用される Bastion ホストの VNET です。VNET は、セキュリティのためにゲートウェイ アクセスを有する Virtual Desktop ホストプールの VNET とのみピアリングされます。この VNET の構成により、セキュリティと制御を実現するためのある程度の分離がネットワークにもたらされます。

4. 待機時間を最小限に抑えてセキュリティを最大限にするために、Contoso Healthcare のデータ センターにどのように接続しますか。
   
   上記で特定された VNET は、ロサンゼルスのプライマリ データセンターへのサイト間 VPN 接続を作成する Azure Firewall を利用して、オンプレミス ネットワークに接続します。推奨される方法として、可能な場合は、ロサンゼルスのデータセンターから Azure 米国西部へ直接 Azure ExpressRoute 接続も利用し、接続の速度とセキュリティを最大化するためのバックアップ接続として米国東部からバージニア州北部のデータ センターへ VPN を使用します。

5. ユーザーが安全に接続するために、どの受信ポート (存在する場合) をセッション ホストに対してオープンにする必要がありますか。
   
   受信ポートは使用しません。逆方向接続のため、セッション ホストに受信ポートは必要ではなく、それによって攻撃対象領域が縮小されます (https://docs.microsoft.com/ja-jp/azure/virtual-desktop/security-guide#session-host-security-best-practices)。

6. ネットワーク上の脅威を特定および監視するために何を使用しますか。
   
   Azure Monitor、Azure Log Analytics、および Advanced Threat Protection では、セキュリティ グループに対するアクションおよびアラートを有効にする必要があります。
   
   Azure Security Center の Standard サブスクリプションは、マイクロソフトの脅威データベースで検出された一般的な脅威を監視、特定、およびアラートを設定するための一元的なダッシュボードを提供します。
   
   Network Watcher を利用して、ネットワーク接続の速度と正常性を監視します。
   
   サービス マップは、仮想ネットワークをさらに監視するために利用されます。
   
   Azure Sentinel は、インシデント対応と、脅威、脆弱性、および異常の調査を行うための中央のソースとなります。

7. ネットワーク全体でネットワーク スループットと待機時間をどのように監視しますか。
   
   VNET 内で Network Watcher をオンにすると、VNET 全体およびオンプレミス ネットワークへのネットワークの速度のログおよび分析が可能になります。

Windows Virtual Desktop イメージ

1. 標準化されたデスクトップ イメージはどのように作成されますか。
   
   推奨されるのは、Contoso Healthcare がユーザーに提供したいマネージド WVD イメージを作成することです。オプションとして、標準イメージの VHD を作成することもできます。このプロセスの詳細は、受講者ガイドに記載されるリンクで紹介されています。さらに別のオプションとして、Windows Virtual Desktop ホスト プールの作成時に Windows 10 マルチユーザー ライセンスと Office365 ProPlus でイメージを作成し、その後カスタムの要件に基づいてそのイメージを調整することもできます。このイメージを作成および管理するために、Azure Image Builder (https://docs.microsoft.com/ja-jp/azure/virtual-machines/windows/image-builder-overview) のような自動化されたイメージ作成ソリューションを使用したり、Packer を使用してイメージを作成 (https://docs.microsoft.com/ja-jp/azure/virtual-machines/windows/build-image-with-packer) し、Azure でイメージを管理することができます。

2. アプリケーションはどのようにデスクトップ イメージに配信されますか。
   
   アプリケーションの配信とライセンスを単純化するために、Contoso Healthcare は現在導入している Citrix インフラストラクチャを活用したいと考えています。これを実現するために、Citrix アプリ マーケットプレイスの標準のデスクトップ イメージにショートカットを提供して、アクセスを承認されたアプリケーションをユーザーに提供するようにできます。

3. ユーザーが Windows Virtual Desktop イメージにアクセスできるようにするためのどのような接続オプションがありますか。
   
   ユーザーが Windows Virtual Desktop イメージにアクセスできるようにするための複数の接続オプションがあります。リモート デスクトップ クライアント アプリケーションは、Windows 10、Windows 7、Android、macOS、または iOS で使用できます。ユーザーは HTML5 対応 Web ブラウザーを介して接続することもできます。Contoso Healthcare 内の 500 台の既存のワークステーション上のオペレーティング システムの全容がわからないため、デスクトップ デバイス上の Web ブラウザーを介して、およびモバイル デバイス上のリモート デスクトップを使用して接続することをお勧めします。

4. ユーザーが Windows Virtual Desktop イメージにアクセスできるようにするための最小システム要件はどのようなものですか。
   
   正式にサポートされるブラウザーは、Microsoft Edge、Internet Explorer、Apple Safari、Google Chrome、および Mozilla Firefox (v55 以降) です。Windows 10、Windows 10 IoT Enterprise、Windows 7、および macOS オペレーティング システムがサポートされます。Microsoft Remote Desktop アプリは、Android および iOS モバイル デバイスで利用できます。

Windows Virtual Desktop ホスト プール

1. Virtual Desktop イメージにアクセスするためにいくつの同時セッションが必要になりますか。
   
   マイクロソフトでは、お客様との初回ディスカッションで特定された 250 セッションすべてをサポートするよう容量を設計する予定です。

2. 同時セッションの数をサポートするために何台の仮想マシンが必要になりますか。
   
   初期容量の見積りを行うために、Azure の料金計算ツールを使用されたことでしょう。この見積りは、最大 31 台の DS2s v3 インスタンスを基本の可用性セットとして、ホストごとに 8 つの仮想デスクトップ セッションを使用して計算されました (参照先: https://docs.microsoft.com/ja-jp/windows-server/remote/remote-desktop-services/virtual-machine-recs)。容量が増加するにつれ、インスタンスを追加してスケーリングします。サンプルの見積りはこちらで確認できます。 https://azure.microsoft.com/ja-jp/pricing/calculator/

オンプレミスから Azure Windows Virtual Desktop ソリューションへの図

この図は、Contoso の Windows Virtual Desktop で考えられるソリューションを示しています。カリフォルニア州のデータ センターは Azure の米国西部リージョンに、バージニア州北部のデータ センターは米国東部リージョンに、それぞれ ExpressRoutes を利用して接続しています。米国西部および米国東部リージョンの VNET は、高速のバックボーン接続のためにピアリングされ、米国東部から、米国西部とピアリングされた WVD VM ホスト プール VNET へのパススルー ピアリングが可能になります。

![前述のオンプレミスから Azure Windows Virtual Desktop ソリューションを示す図です。 ](images/wvdsolutiondiagramv2.png "オンプレミスから Azure Windows Virtual Desktop ソリューション")

## 反論への推奨される対応のチェックリスト

1. Contoso Healthcare の CTO は、標準化されたデスクトップ イメージをサポートするために新しいワークステーションとモバイル デバイスに投資することを望んでいません。これらのデバイスで新しいイメージをサポートできるでしょうか。
   
   Windows Virtual Desktop は、ユーザーがそれぞれの仮想デスクトップにアクセスする方法において柔軟性があります。ワークステーション上の仮想デスクトップ、およびモバイル デバイス上のリモート デスクトップ アプリへの Web ブラウザー アクセスを利用するよう設計されています。

2. Contoso Healthcare の CISO を、データが漏えいすることはないと説得する必要があります。マイクロソフトは Contoso Healthcare のデータ保護のニーズをどのようにサポートできるでしょうか。
   
   Contoso Healthcare のために設計されたソリューションには、Microsoft 365 E5 の Enterprise Mobility + Security (EMS) E5 が含まれます。これにより、機密データを分類し、アクティビティを監査するためのデータおよび情報保護機能の完全なスイートが提供されます。また、Cloud App Security を使用して、未承認のファイル共有サービスへのアクセスをブロックして、ユーザーが保護されていない場所にファイルをコピーするのを防止することもできます。データ保護コントロールは、Microsoft 365 のセキュリティ ポリシー アドバイザーと、Azure Security Center を介して監視できます。

3. Contoso Healthcare ではデスクトップ イメージ上のすべてのアクティビティをログ記録して監査できる必要があります。クラウドおよびオンプレミス環境上でこれにどのように対処できるでしょうか。
   
   Azure Monitor および Azure Log Analytics は、Azure 環境内で有効化されます。インフラストラクチャ全体のアクティビティを監視するために、Azure Monitor エージェントが Azure およびオンプレミスのデバイス (ノート PC、電話) のセッション ホストに展開されます。

4. 要件を満たすためには、クラウドと既存のデータ センター間の接続はセキュアで信頼性が高いものである必要があります。どのようにこの点を解決し、監視できるでしょうか。
   
   初期設計で、Azure からカリフォルニア州およびバージニア州北部のデータ センターへのセキュアで暗号化されたサイト間 VPN 接続が利用されます。Azure からカリフォルニア州およびバージニア州北部のデータ センターへのプライベート専用接続を提供するために、Azure ExpressRoute 接続を利用するオプションも提供されます。接続のネットワーク トラフィックとスループットを監視するために Network Watcher が使用されます。Azure Security Center および Advanced Threat Protection は、潜在的な脆弱性と脅威を監視し、アラートを設定するために配備されます。

5. Contoso Healthcare は、現在のデータ センターにかなりの設備投資を行ってきているため、それらを使用停止にすることは望んでいません。現在のデータ センターをサポートするよう、どのようにインフラストラクチャを設計できますか。
   
   設計されたソリューションは、Citrix を介して、現在のアプリケーション配信構成を標準化された Windows Virtual Desktop イメージに統合するように設計されています。さらに、Azure AD Connect がハッシュ同期と共に使用されることで、Azure Active Directory ID 管理と既存のオンプレミス Active Directory ドメイン間でのシングル サインオン環境を提供します。ハードウェアは現在のデータ センター内で減価償却されるため、アプリケーション サーバーは Azure に移行でき、Windows Virtual Desktop イメージはこれらのサーバーの新しい場所に更新することができます。

## 顧客の声 (最後に出席者に対して読み上げる)

「マイクロソフトによって、Contoso Healthcare と共に成長することが可能な、セキュアで管理しやすいインフラストラクチャを設計できました。この幅広さと奥深さによって、当社のビジネス ニーズと、アプリケーションの規制要件の両方を満たすことが可能になります。言うまでもなく、医療従事者が、必要な時に、必要な患者データに確実にアクセスすることが可能になります」

Ken Greenwald 氏、CTO、Contoso Healthcare